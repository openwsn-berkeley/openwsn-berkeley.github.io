<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.4"/>
<title>OpenWSN Firmware: C:/Jenkins/jobs/Firmware Docs/workspace/firmware/openos/projects/xpressohack/OpenWSN_OS/src/main.c File Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">OpenWSN Firmware
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.4 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('projects_2xpressohack_2_open_w_s_n___o_s_2src_2main_8c.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#var-members">Variables</a>  </div>
  <div class="headertitle">
<div class="title">main.c File Reference</div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><code>#include &lt;cr_section_macros.h&gt;</code><br/>
<code>#include &lt;NXP/crp.h&gt;</code><br/>
</div><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:a840291bc02cba5474a4cb46a9b9566fe"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="projects_2xpressohack_2_open_w_s_n___o_s_2src_2main_8c.html#a840291bc02cba5474a4cb46a9b9566fe">main</a> (void)</td></tr>
<tr class="memdesc:a840291bc02cba5474a4cb46a9b9566fe"><td class="mdescLeft">&#160;</td><td class="mdescRight">This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.  <a href="#a840291bc02cba5474a4cb46a9b9566fe">More...</a><br/></td></tr>
<tr class="separator:a840291bc02cba5474a4cb46a9b9566fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="var-members"></a>
Variables</h2></td></tr>
<tr class="memitem:a2cf89d37cd40fb4274f5d428632e9ac5"><td class="memItemLeft" align="right" valign="top">__CRP const unsigned int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="projects_2xpressohack_2_open_w_s_n___o_s_2src_2main_8c.html#a2cf89d37cd40fb4274f5d428632e9ac5">CRP_WORD</a> = CRP_NO_CRP</td></tr>
<tr class="separator:a2cf89d37cd40fb4274f5d428632e9ac5"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ae25b56d219db42d80cb1b247d78bf277"><td class="memItemLeft" align="right" valign="top">unsigned long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="projects_2xpressohack_2_open_w_s_n___o_s_2src_2main_8c.html#ae25b56d219db42d80cb1b247d78bf277">f_cpu_awake</a> = 100000000L</td></tr>
<tr class="separator:ae25b56d219db42d80cb1b247d78bf277"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<h2 class="groupheader">Function Documentation</h2>
<a class="anchor" id="a840291bc02cba5474a4cb46a9b9566fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int main </td>
          <td>(</td>
          <td class="paramtype">void&#160;</td>
          <td class="paramname">)</td><td></td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">

<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board. </p>
<dl class="section note"><dt>Note</dt><dd>The term "crystal" is usually written "XTAL" by embedded geeks.</dd></dl>
<p>Download the program to a GINA board, run it, you should see the 4 LEDs blinking in sequence with a 500ms period.</p>
<p>The digital outputs are:</p>
<ul>
<li>P2.0: red LED</li>
<li>P2.1: green LED</li>
<li>P2.2: blue LED</li>
<li>P2.3: red LED</li>
</ul>
<p>The "inputs" are:</p>
<ul>
<li>XIN, XOUT: 32768Hz crystal oscillator</li>
</ul>
<p>The debug pins are:</p>
<ul>
<li>P5.6 output the ACLK (should be 32768Hz)</li>
<li>P1.1 toggles when interrupt TIMERA0_VECTOR fires</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012 The program starts executing here.</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<p>The digital UART interface is:</p>
<ul>
<li>P3.7: A1_SOMI_RX</li>
<li>P3.8: A1_SOMI_TX</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012 The program starts executing here.</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<p>Download the program to a TelosB board, run it, and when you press the USER button, the red LED with toggle. Note that the RESET button is non programmable, and always resets the MSP430.</p>
<dl class="section note"><dt>Note</dt><dd>To "toggle" a pin means that, when it's off, it turns on, and when it's on, it turns off.</dd></dl>
<p>The digital outputs are:</p>
<ul>
<li>P5.4: red LED</li>
</ul>
<p>The digital inputs are:</p>
<ul>
<li>P2.7: button</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012 The program starts executing here.</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<p>Download the program to a TelosB board, run it. It will output its clocks on the pins below. Note that these pins are connected to the LEDs, so they will blink (so fast they will appear simply on to your slow eyes). Use a scope probe to see the clock signals and measure their frequency.</p>
<p>The digital outputs are:</p>
<ul>
<li>P5.4: MCLK (red LED or pad 48 on the back)</li>
<li>P5.5: SMCLK (green LED or pad 49 on the back)</li>
<li>P5.6: ACLK (blue LED)</li>
</ul>
<p>We measure an DCO frequency of 4.8MHz. Very low, indeed.</p>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012 The program starts executing here.</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<p>The digital SPI interface consists of:</p>
<ul>
<li>P3.2/SOMI0: "slave-out-master-in", i.e. CC2420-&gt;MSP430</li>
<li>P3.3/SCL: clock line</li>
<li>P4.2: chip-select (active-low) Extra lines:</li>
<li>P1.7: "slave-it-master-out", i.e. MSP430-&gt;CC2420</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<dl class="section note"><dt>Note</dt><dd>The term "crystal" is usually written "XTAL" by embedded geeks.</dd></dl>
<p>Download the program to a TelosB board, run it, you should see the 3 LEDs blinking in sequence with a 500ms period.</p>
<p>The digital outputs are:</p>
<ul>
<li>P5.4: red LED</li>
<li>P5.5: green LED</li>
<li>P5.6: blue LED</li>
</ul>
<p>The "inputs" are:</p>
<ul>
<li>XIN, XOUT: 32768Hz crystal oscillator</li>
</ul>
<p>The debug pins are:</p>
<ul>
<li>P6.6 toggles when interrupt TIMERA0_VECTOR fires</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012 The program starts executing here.</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<dl class="section note"><dt>Note</dt><dd>The term "micro-controller" is usually written "uC" by embedded geeks.</dd></dl>
<p>Download the program to a TelosB board, run it, you should see the red, then the green, then the blue LEDs go on (all within less than a second). This is the sequence of events:</p>
<ul>
<li>enable and reset the radio ==&gt; red LED on</li>
<li>configure SPI registers on MSP430</li>
<li>send a SNOP strobe to radio ==&gt; green LED on</li>
<li>receive status byte from radio ==&gt; blue LED on</li>
<li>go to sleep</li>
</ul>
<p>The digital SPI interface consists of:</p>
<ul>
<li>P3.1/SIMO0: "slave-it-master-out", i.e. MSP430-&gt;CC2420</li>
<li>P3.2/SOMI0: "slave-out-master-in", i.e. CC2420-&gt;MSP430</li>
<li>P3.3/SCL: clock line</li>
<li>P4.2: chip-select (active-low) Extra lines:</li>
<li>P4.5: radio VREG (active-high)</li>
<li>P4.6: radio reset line (active-low)</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<p>The MSP430 chip speaks 2-wire UART, i.e. one two pins are used: one for sending bytes (UART1TX), one for receiving bytes (UART1RX). These pins are connected to an FTDI "UART-to-USB" converted chip. When you plug the TelosB into your computer, the FTDI driver install a virtual COM port. That is, when you read/write to that port, the bytes end up on the UART1RX/UART1TX pins.</p>
<p>Connect your TelosB board to your computer, download this application to your TelosB board and run it. On your computer, open a PuTTY client on the virtual COM port of your board, and type characters into it.</p>
<p>Each time you type a character, you should see:</p>
<ul>
<li>the small green LED (RX) blinks. It's mounted on the RX line, so "shows" you when a byte passes.</li>
<li>the character prints on your terminal, as it is sent back on the TX line.</li>
<li>the red LED toggles</li>
<li>the smalll red LED (TX) blinks. It's mounted on the TX line, so "shows" you when a byte passes.</li>
</ul>
<p>Uncomment the BAUDRATE_115200 line below to switch from 9600baud to 115200baud.</p>
<p>The digital UART interface is:</p>
<ul>
<li>P3.6: UART1TX</li>
<li>P3.7: UART1RX</li>
</ul>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012 The program starts executing here.</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<dl class="section author"><dt>Author</dt><dd>xavi vilajosana <a href="#" onclick="location.href='mai'+'lto:'+'xvi'+'la'+'jos'+'an'+'a@e'+'ec'+'s.b'+'er'+'kel'+'ey'+'.ed'+'u'; return false;">xvila<span style="display: none;">.nosp@m.</span>josa<span style="display: none;">.nosp@m.</span>na@ee<span style="display: none;">.nosp@m.</span>cs.b<span style="display: none;">.nosp@m.</span>erkel<span style="display: none;">.nosp@m.</span>ey.e<span style="display: none;">.nosp@m.</span>du</a>, March 2012</dd></dl>
<p>This is a standalone test program for the LEDs and 32kHz crystal of the GINA board.</p>
<dl class="section author"><dt>Author</dt><dd>Thomas Watteyne <a href="#" onclick="location.href='mai'+'lto:'+'wat'+'te'+'yne'+'@e'+'ecs'+'.b'+'erk'+'el'+'ey.'+'ed'+'u'; return false;">watte<span style="display: none;">.nosp@m.</span>yne@<span style="display: none;">.nosp@m.</span>eecs.<span style="display: none;">.nosp@m.</span>berk<span style="display: none;">.nosp@m.</span>eley.<span style="display: none;">.nosp@m.</span>edu</a>, February 2012 </dd></dl>

</div>
</div>
<h2 class="groupheader">Variable Documentation</h2>
<a class="anchor" id="a2cf89d37cd40fb4274f5d428632e9ac5"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">__CRP const unsigned int CRP_WORD = CRP_NO_CRP</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
<a class="anchor" id="ae25b56d219db42d80cb1b247d78bf277"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">unsigned long f_cpu_awake = 100000000L</td>
        </tr>
      </table>
</div><div class="memdoc">

</div>
</div>
</div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_4916502eeeee2174d69d9d347bc18007.html">firmware</a></li><li class="navelem"><a class="el" href="dir_f8f7d70f6415baf543d11d3df711609b.html">openos</a></li><li class="navelem"><a class="el" href="dir_7f34c0d85a2ddbb24891d33fc4ace397.html">projects</a></li><li class="navelem"><a class="el" href="dir_91e80d1c76cf61cce5a93441c89fc0f9.html">xpressohack</a></li><li class="navelem"><a class="el" href="dir_f0fe221d6e53514d253cfed79b70e172.html">OpenWSN_OS</a></li><li class="navelem"><a class="el" href="dir_46074401668cec6cf732e9ddfd1a8f2a.html">src</a></li><li class="navelem"><a class="el" href="projects_2xpressohack_2_open_w_s_n___o_s_2src_2main_8c.html">main.c</a></li>
    <li class="footer">Generated on Mon Sep 9 2013 22:08:58 for OpenWSN Firmware by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.4 </li>
  </ul>
</div>
</body>
</html>
